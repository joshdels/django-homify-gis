{% extends "base_v2.html" %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Add Properties{% endblock title %}

{% block content %}

<div class="container-fluid p-0" style="overflow-x: hidden; height: 100vh;">
  <div class="row g-0 h-100">

    <!-- LEFT: Map -->
    <div class="col-12 col-md-6 p-0" id="map" style="background-color: #000;">
      Map
    </div>

    <!-- RIGHT: Sidebar / Form -->
    <div class="col-12 col-md-6 bg-light d-flex flex-column" style="overflow-y: auto;" id="sidebar">
      <div class="p-4 d-flex flex-column flex-grow-1">

        <!-- Header -->
        <h2 class="fw-bold mb-4">Add New Property</h2>

        <!-- Pin Button -->
        <button id="pinbtn" class="btn btn-outline-primary mb-4 w-50">Pin Location</button>

        <!-- Form -->
        <form method="post" enctype="multipart/form-data" class="d-flex flex-column flex-grow-1">
          {% csrf_token %}

          <!-- Property Details -->
          <div class="mb-4">
            <h5 class="fw-semibold mb-3 text-secondary">üè† Property Details</h5>
            <div class="row g-3">
              {% for field in form %}
                <div class="col-md-6">
                  <label class="form-label fw-semibold">{{ field.label }}</label>
                  {{ field|add_class:"form-control" }}
                  {% if field.errors %}
                    <div class="text-danger small mt-1">{{ field.errors }}</div>
                  {% endif %}
                </div>
              {% endfor %}
            </div>
          </div>

          <!-- Property Images -->
          <div class="mb-4">
            <h5 class="fw-semibold mb-3 text-secondary">üì∑ Property Images</h5>
            <p class="text-muted small mb-2">Upload one or more images for this property.</p>
            <input type="file" name="images" class="form-control" multiple required>
          </div>

          <!-- Save Button -->
          <div class="mt-auto pt-3 border-top">
            <div class="d-grid">
              <button type="submit" class="btn btn-primary btn-lg shadow-sm rounded-pill">
                üíæ Save Property
              </button>
            </div>
          </div>

        </form>

      </div>
      {% include 'page_footer.html' %}
    </div>

  </div>
</div>

<style>
  /* Form inputs */
  input, select, textarea {
    width: 100%;
    padding: 0.6rem;
    border-radius: 0.4rem;
    border: 1px solid #ced4da;
    box-sizing: border-box;
  }
  
#sidebar {
  height: 100vh;  /* sidebar full height */
  overflow-y: auto; /* enable vertical scroll */
}


</style>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'map/addData.js' %}"></script>

{% endblock %}
