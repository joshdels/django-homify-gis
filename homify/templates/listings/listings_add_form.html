{% extends "base_v2.html" %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Homira | Add Properties{% endblock title %}

{% block content %}

<div class="container-fluid p-0" style="overflow-x: hidden; height: 100vh;">
  <div class="row g-0 h-100">

    <!-- LEFT: Map -->
    <div class="col-12 col-md-6 p-0" id="map" style="background-color: #000;">
      Map
    </div>

    <!-- RIGHT: Sidebar / Form -->
    <div class="col-12 col-md-6 bg-light d-flex flex-column" style="overflow-y: auto;" id="sidebar">
      <div class="p-4 d-flex flex-column flex-grow-1">

        <!-- Header -->
        <h2 class="fw-bold mb-4">Add New Property</h2>

        <!-- Pin Button -->
        <button id="pinbtn" class="btn btn-outline-primary mb-4 w-50">Pin Location</button>

        <!-- Form -->
        <form method="post" enctype="multipart/form-data" class="d-flex flex-column flex-grow-1">
          {% csrf_token %}

          <!-- Property Details -->
          <div class="mb-4">
            <h5 class="fw-semibold mb-3 text-secondary">üè† Property Details</h5>
            <div class="row g-3 mb-3">

              <!-- Category -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ form.category.label }}</label>
                {{ form.category|add_class:"form-select" }}
              </div>

              <!-- Property Type -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ form.property_type.label }}</label>
                {{ form.property_type|add_class:"form-select" }}
              </div>

              <!-- Address -->
              <div class="col-12">
                <label class="form-label fw-semibold">{{ form.address.label }}</label>
                {{ form.address|add_class:"form-control" }}
              </div>

              <!-- City -->
              <div class="col-12">
                <label class="form-label fw-semibold">{{ form.address_city.label }}</label>
                {{ form.address_city|add_class:"form-control" }}
              </div>

              <!-- Price -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ form.price.label }}</label>
                {{ form.price|add_class:"form-control" }}
              </div>

              <!-- Floor Area -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ form.floor_area.label }}</label>
                {{ form.floor_area|add_class:"form-control" }}
              </div>

              <!-- Bedrooms -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ form.bedrooms.label }}</label>
                {{ form.bedrooms|add_class:"form-control" }}
              </div>

              <!-- Bathrooms -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ form.bathrooms.label }}</label>
                {{ form.bathrooms|add_class:"form-control" }}
              </div>

              <!-- Number of Rooms -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ form.number_of_rooms.label }}</label>
                {{ form.number_of_rooms|add_class:"form-control" }}
              </div>

              <!-- Floor Storey -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ form.floor_storey.label }}</label>
                {{ form.floor_storey|add_class:"form-control" }}
              </div>

              <!-- Available Units -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ form.available_unit.label }}</label>
                {{ form.available_unit|add_class:"form-control" }}
              </div>

              <!-- Status -->
              <div class="col-md-6">
                <label class="form-label fw-semibold">{{ form.status.label }}</label>
                {{ form.status|add_class:"form-select" }}
              </div>

              <!-- Amenities -->
              <div class="col-12">
                <label class="form-label fw-semibold">{{ form.amenities.label }}</label>
                <div class="row">
                  {% for checkbox in form.amenities %}
                    <div class="form-check mx-3">
                      {{ checkbox }}
                    </div>
                  {% endfor %}
                </div>
              </div>

              <!-- Description -->
              <div class="col-12">
                <label class="form-label fw-semibold">{{ form.description.label }}</label>
                {{ form.description|add_class:"form-control" }}
              </div>

            </div> <!-- END row -->
          </div> <!-- END Property Details -->

          <!-- Hidden Lat/Lng -->
          {{ form.latitude }}
          {{ form.longitude }}

          <!-- Property Images -->
          <div class="mb-4">
            <h5 class="fw-semibold mb-3 text-secondary">üì∑ Property Images</h5>
            <p class="text-muted small mb-2">Upload one or more images for this property.</p>
            <input type="file" name="images" class="form-control" multiple required>
          </div>

          <!-- Save Button -->
          <div class="mt-auto pt-3 border-top">
            <div class="d-grid">
              <button type="submit" class="btn btn-primary btn-lg shadow-sm rounded-pill">
                Save Property
              </button>
            </div>
          </div>

        </form>

        {% include 'page_footer.html' %}
      </div>
    </div>

  </div>
</div>

<style>
  /* Form inputs */
  input, select, textarea {
    width: 100%;
    padding: 0.6rem;
    border-radius: 0.4rem;
    border: 1px solid #ced4da;
    box-sizing: border-box;
  }
  
  #sidebar {
    height: 100vh;  /* sidebar full height */
    overflow-y: auto; /* enable vertical scroll */
  }

  body {
    overflow-y: hidden;
  }
</style>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="{% static 'js/map/addData.js' %}"></script>

{% endblock %}
